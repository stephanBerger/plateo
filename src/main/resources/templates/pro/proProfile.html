<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org">
<head th:replace="public/head :: head"></head>
<head>
	<!-- <link th:href="@{/css/stylePro.css}" rel="stylesheet" type="text/css" > -->
</head>
<body class="BgBlue">
	<header th:replace="pro/headerdashboard :: header"></header>
	<div class="row text-center border-top border-bottom pt-2 pb-2 top-content">
		<div class="offset-3 col-1">
			 <img th:src="${logo}" class="w-100">
		</div>
		<div class="col-4">
			<div class="blue h3" th:text="${pro.companyName}">Nom de la société</div>
			<div>
			<span th:text="${pro.proAddress}">,</span>
			<span th:text="${pro.proCity}"></span>
			<span th:text="${pro.proPostcode}"></span>
			</div>
		</div>
	</div>
	<div class="mt-5">
		<div class="row">
			<div class="col-7 offset-1">
				<div>
					<span th:each="photo, iterStat: ${photos}">
	   	    			<img th:src="${photo[0]}" th:id="@{'img-wrapper'}+${iterStat.index}" style="width:200px;" class="b-1">
					</span>
				</div>
			<div>
			<input id="mySlider" type="range" min="0" max="5" value="0" step="1" onchange="resizeImage();" style="width:500px;">
		</div>
		  		<div class="mt-3" th:if="${pro.proEmailAddress == username}">
					<form th:object="${pro}" th:action="@{/public/proAddPhoto/{id}(id=${pro.id})}" method="POST" enctype="multipart/form-data">
						<div>
							<label for="proPhotos">Sélectionner le fichier à envoyer</label>
						</div>
						<input type="file" id="listProPhotos" name="listProPhotos" accept="image/png, image/jpeg" multiple required>
						<div class="mt-1">
							<button>Envoyer</button>
							<button onClick="this.form.reset()">Annuler</button>
						</div>
						<button type="button" data-toggle="modal" data-target="#deletePics">
  						Supprimer photos
						</button>
						<div th:if="${msg eq 'plsPhot'}" class="alert alert-danger alert-dismissable">
							<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
							<strong>Veuillez ajouter une photo</strong>
						</div>
					</form>
				</div>
				
			</div>
			<div class="col-3"> 
				<div class="border border-primary p-1" th:object="${pro}">
					<div th:text="*{managerLastname}">Description de l'activité</div>
					<div th:text="*{managerFirstname}">Adresse email</div>
					<div th:text="*{proEmailAddress}">Adresse email</div>
					<div th:text="*{proPhoneNumber}">Numéro de téléphone</div>
					<img th:src="@{https://api.qrserver.com/v1/create-qr-code/?data={email}(email=*{proEmailAddress});size=100x100}" alt="" title="" />
				</div> 
				<!--<div class="border border-info">Notes</div>-->
			</div>
		</div>
	</div>
	<!-- Modal -->
	<div class="modal fade" id="deletePics" tabindex="-1" role="dialog" aria-labelledby="deletePicsLabel" aria-hidden="true">
 		<div class="modal-dialog" role="document">
    		<div class="modal-content">
      			<div class="modal-header">
        			<h5 class="modal-title" id="exampleModalLabel">Suppression de photos</h5>
        			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
          				<span aria-hidden="true">&times;</span>
        			</button>
      			</div>
      			<div class="modal-body">
	        		<div th:each="photo : ${photos}" class="border-bottom">
				  		<img th:src="${photo[0]}" class="d-block w-25 mb-1 mt-1">
				  		<a th:href="@{/pro/proDeletePhotos/}+ ${photo[1]}">Supprimer</a>
					</div>
	      		</div>
    		</div>
  		</div>
	</div>
<script th:inline="javascript">
/*<![CDATA[*/
function setImage() {
	  var e = document.getElementById('mySelect');
	  document.getElementById('myImage').src = e.options[e.selectedIndex].value;
	}
function resizeImage(){
	var i = 0;
	var image;
    /*[# th:each="photo: ${photos}"]*/
        image = document.getElementById('img-wrapper'+i),
	    ranger = document.getElementById('mySlider');
        image.style.width = (200+(mySlider.value / 1)*100)+'px';
	  	i++;
    /*[/]*/

}
/*]]>*/
</script>
</body>
</html>